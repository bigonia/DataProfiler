# 智能数据剖析与处理平台 - 前端设计文档 v1.0

## 1. 概述

本文档描述了智能数据剖析与处理平台前端系统的设计架构、技术选型、组件设计和用户界面规范。前端系统基于Vue 3 + Vite构建，采用现代化的组件化开发模式，为用户提供直观、高效的数据剖析操作界面。

## 2. 技术架构

### 2.1 技术栈

- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **UI组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router 4
- **HTTP客户端**: Axios
- **样式预处理**: SCSS
- **代码规范**: ESLint + Prettier
- **类型检查**: TypeScript

### 2.2 项目结构

```
frontend/
├── public/                 # 静态资源
├── src/
│   ├── api/               # API接口定义
│   ├── components/        # 通用组件
│   ├── views/            # 页面组件
│   ├── stores/           # Pinia状态管理
│   ├── router/           # 路由配置
│   ├── utils/            # 工具函数
│   ├── types/            # TypeScript类型定义
│   ├── styles/           # 全局样式
│   ├── App.vue           # 根组件
│   └── main.ts           # 入口文件
├── package.json
├── vite.config.ts
└── tsconfig.json
```

## 3. 核心功能模块设计

### 3.1 数据源管理模块 (DataSourceManager)

**功能职责**:
- 数据源的增删改查操作
- 数据源连接测试
- 支持多种数据源类型(MySQL, PostgreSQL, SQLite, File)

**主要组件**:
- `DataSourceList.vue` - 数据源列表展示
- `DataSourceForm.vue` - 数据源配置表单
- `DataSourceTest.vue` - 连接测试组件
- `FileUpload.vue` - 文件上传组件

**页面路由**:
- `/datasources` - 数据源管理主页
- `/datasources/create` - 创建数据源
- `/datasources/:id/edit` - 编辑数据源

### 3.2 剖析任务模块 (ProfilingTaskCreator)

**功能职责**:
- 创建和管理数据剖析任务
- 任务状态监控和进度展示
- 支持单源和多源剖析任务

**主要组件**:
- `TaskCreator.vue` - 任务创建向导
- `TaskList.vue` - 任务列表
- `TaskStatus.vue` - 任务状态监控
- `DataSourceSelector.vue` - 数据源选择器
- `SchemaTableSelector.vue` - Schema和表选择器

**页面路由**:
- `/tasks` - 任务管理主页
- `/tasks/create` - 创建任务
- `/tasks/:id/status` - 任务状态详情

### 3.3 报告查看模块 (StructuredReportViewer)

**功能职责**:
- 分层报告展示(摘要/详细)
- 报告数据可视化
- 报告导出功能
- 支持多种数据格式展示

**主要组件**:
- `ReportSummary.vue` - 摘要报告展示
- `ReportDetails.vue` - 详细报告展示
- `DataTable.vue` - 数据表格组件
- `MetricsChart.vue` - 指标图表组件
- `ReportExport.vue` - 报告导出组件

**页面路由**:
- `/reports` - 报告管理主页
- `/reports/summary` - 摘要报告
- `/reports/details` - 详细报告
- `/reports/:id/view` - 单个报告查看

### 3.4 文件管理模块 (FileUpload)

**功能职责**:
- 文件上传和管理
- 支持Excel、CSV等格式
- 文件预览和删除

**主要组件**:
- `FileUploader.vue` - 文件上传组件
- `FileList.vue` - 文件列表
- `FilePreview.vue` - 文件预览

## 4. 用户界面设计

### 4.1 整体布局

采用经典的后台管理系统布局:
- **顶部导航栏**: 系统标题、用户信息、系统设置
- **左侧菜单栏**: 功能模块导航
- **主内容区**: 页面内容展示
- **底部状态栏**: 系统状态信息

### 4.2 主要页面设计

#### 4.2.1 数据源管理页面
- **列表视图**: 卡片式展示数据源，支持搜索和筛选
- **表单视图**: 分步骤配置不同类型的数据源
- **测试结果**: 实时显示连接测试状态

#### 4.2.2 任务创建页面
- **向导式界面**: 分步骤引导用户创建任务
- **数据源选择**: 支持多选和范围配置
- **任务配置**: 剖析参数设置
- **预览确认**: 任务配置预览和确认

#### 4.2.3 报告展示页面
- **摘要视图**: 卡片式展示关键指标
- **详细视图**: 表格和图表结合展示
- **交互式图表**: 支持数据钻取和筛选
- **导出功能**: 多格式报告导出

### 4.3 响应式设计

- **桌面端**: 1200px以上，完整功能展示
- **平板端**: 768px-1199px，适配布局调整
- **移动端**: 768px以下，简化操作界面

## 5. 状态管理设计

### 5.1 Store结构

```typescript
// stores/datasource.ts
export const useDataSourceStore = defineStore('datasource', {
  state: () => ({
    dataSources: [],
    currentDataSource: null,
    loading: false
  }),
  actions: {
    async fetchDataSources(),
    async createDataSource(),
    async updateDataSource(),
    async deleteDataSource(),
    async testConnection()
  }
})

// stores/task.ts
export const useTaskStore = defineStore('task', {
  state: () => ({
    tasks: [],
    currentTask: null,
    taskStatus: {}
  }),
  actions: {
    async createTask(),
    async fetchTasks(),
    async getTaskStatus(),
    async deleteTask()
  }
})

// stores/report.ts
export const useReportStore = defineStore('report', {
  state: () => ({
    summaryReports: [],
    detailedReports: [],
    currentReport: null
  }),
  actions: {
    async fetchSummaryReports(),
    async fetchDetailedReports(),
    async exportReport()
  }
})
```

## 6. API接口设计

### 6.1 接口封装

```typescript
// api/datasource.ts
export const dataSourceApi = {
  list: () => request.get('/datasources'),
  create: (data: DataSourceConfig) => request.post('/datasources', data),
  update: (id: string, data: DataSourceConfig) => request.put(`/datasources/${id}`, data),
  delete: (id: string) => request.delete(`/datasources/${id}`),
  test: (id: string) => request.post(`/datasources/${id}/test`)
}

// api/task.ts
export const taskApi = {
  create: (data: ProfilingTaskRequest) => request.post('/profiling/profiling-tasks', data),
  getStatus: (taskId: string) => request.get(`/profiling/task-status/${taskId}`),
  delete: (taskId: string) => request.delete(`/profiling/profiling-tasks/${taskId}`)
}

// api/report.ts
export const reportApi = {
  getSummary: (data: ReportSummaryRequest) => request.post('/reports/summary', data),
  getDetailed: (data: DetailedReportRequest) => request.post('/reports/detailed', data),
  export: (reportId: string, format: string) => request.get(`/reports/export/${reportId}?format=${format}`)
}
```

### 6.2 错误处理

- **全局错误拦截**: 统一处理HTTP错误
- **业务错误处理**: 根据错误码显示相应提示
- **网络异常处理**: 网络超时和连接失败处理

## 7. 性能优化策略

### 7.1 代码分割
- **路由懒加载**: 按需加载页面组件
- **组件懒加载**: 大型组件异步加载
- **第三方库分割**: 独立打包常用库

### 7.2 数据优化
- **虚拟滚动**: 大数据量表格优化
- **分页加载**: 报告数据分页展示
- **缓存策略**: 合理缓存API数据

### 7.3 渲染优化
- **组件复用**: 合理使用keep-alive
- **计算属性**: 避免重复计算
- **事件防抖**: 搜索和筛选防抖处理

## 8. 开发规范

### 8.1 代码规范
- **命名规范**: 组件PascalCase，方法camelCase
- **文件组织**: 按功能模块组织文件
- **注释规范**: 关键逻辑添加英文注释

### 8.2 组件规范
- **单一职责**: 每个组件职责明确
- **Props验证**: 使用TypeScript类型检查
- **事件命名**: 使用kebab-case命名事件

### 8.3 样式规范
- **BEM命名**: CSS类名使用BEM规范
- **变量管理**: 使用CSS变量管理主题
- **响应式**: 移动优先的响应式设计

## 9. 测试策略

### 9.1 单元测试
- **组件测试**: 使用Vue Test Utils
- **工具函数测试**: Jest单元测试
- **Store测试**: Pinia状态管理测试

### 9.2 集成测试
- **API测试**: Mock API接口测试
- **路由测试**: 页面跳转和权限测试
- **用户流程测试**: 关键业务流程测试

## 10. 部署和构建

### 10.1 构建配置
- **开发环境**: 热更新和调试支持
- **生产环境**: 代码压缩和优化
- **预览环境**: 生产环境预览

### 10.2 部署策略
- **静态部署**: 构建后部署到CDN
- **Docker部署**: 容器化部署方案
- **CI/CD**: 自动化构建和部署

## 11. 安全考虑

### 11.1 数据安全
- **敏感信息**: 不在前端存储敏感数据
- **XSS防护**: 输入输出过滤和转义
- **CSRF防护**: 请求令牌验证

### 11.2 接口安全
- **请求验证**: 参数校验和签名
- **权限控制**: 基于角色的访问控制
- **日志记录**: 关键操作日志记录

---

本设计文档将作为前端开发的指导性文件，确保项目的技术架构合理、代码质量可控、用户体验优良。